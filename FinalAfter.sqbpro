<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="FinalAfter.db" readonly="0" foreign_keys="0" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="query structure browser pragmas" current="0"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="4232"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="Total2008" custom_title="0" dock_id="1" table="4,9:mainTotal2008"/><dock_state state="000000ff00000000fd0000000100000002000005970000037ffc0100000001fb000000160064006f0063006b00420072006f00770073006500310100000000000005970000015c00ffffff000005970000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="Add_CapEC_Full_Remainder_2008" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="163"/><column index="2" value="300"/><column index="3" value="159"/><column index="4" value="176"/><column index="5" value="149"/><column index="6" value="183"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Add_CapEC_Full_Remainder_2020" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="163"/><column index="2" value="300"/><column index="3" value="159"/><column index="4" value="176"/><column index="5" value="149"/><column index="6" value="183"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Add_UnCapEC_NE_Remainder_2012" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="163"/><column index="2" value="296"/><column index="3" value="169"/><column index="4" value="186"/><column index="5" value="159"/><column index="6" value="194"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="After_AddSen_2008" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="163"/><column index="2" value="78"/><column index="3" value="300"/><column index="4" value="102"/><column index="5" value="117"/><column index="6" value="130"/><column index="7" value="158"/><column index="8" value="163"/><column index="9" value="174"/><column index="10" value="178"/><column index="11" value="101"/><column index="12" value="116"/><column index="13" value="55"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="After_addRem_2008" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="163"/><column index="2" value="78"/><column index="3" value="300"/><column index="4" value="102"/><column index="5" value="117"/><column index="6" value="130"/><column index="7" value="158"/><column index="8" value="163"/><column index="9" value="174"/><column index="10" value="178"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="All_Remainder_2008" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="163"/><column index="2" value="300"/><column index="3" value="136"/><column index="4" value="141"/><column index="5" value="151"/><column index="6" value="156"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="LG_Elect2008" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="40"/><column index="2" value="163"/><column index="3" value="78"/><column index="4" value="300"/><column index="5" value="102"/><column index="6" value="119"/><column index="7" value="117"/><column index="8" value="105"/><column index="9" value="132"/><column index="10" value="125"/><column index="11" value="154"/><column index="12" value="132"/><column index="13" value="129"/><column index="14" value="159"/><column index="15" value="130"/><column index="16" value="134"/><column index="17" value="140"/><column index="18" value="169"/><column index="19" value="139"/><column index="20" value="145"/><column index="21" value="174"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="LG_Remain2008" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="40"/><column index="2" value="163"/><column index="3" value="78"/><column index="4" value="300"/><column index="5" value="102"/><column index="6" value="119"/><column index="7" value="117"/><column index="8" value="105"/><column index="9" value="132"/><column index="10" value="125"/><column index="11" value="154"/><column index="12" value="132"/><column index="13" value="129"/><column index="14" value="159"/><column index="15" value="130"/><column index="16" value="134"/><column index="17" value="140"/><column index="18" value="169"/><column index="19" value="139"/><column index="20" value="145"/><column index="21" value="174"/><column index="22" value="144"/><column index="23" value="149"/><column index="24" value="159"/><column index="25" value="164"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="Total2008" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="163"/><column index="2" value="78"/><column index="3" value="300"/><column index="4" value="102"/><column index="5" value="178"/><column index="6" value="193"/><column index="7" value="128"/><column index="8" value="188"/><column index="9" value="193"/><column index="10" value="143"/><column index="11" value="203"/><column index="12" value="208"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1">With Fix AS (
SELECT STATE, FEC_ID, Candidate_Name,
CAST(SUM(Candidate_Votes) AS REAL) AS SumCanVote,
CAST(SUM(Capped_EC_Full_Candidate_Vote) AS REAL) as SumCapECFull, 
CAST(SUM(Capped_EC_NE_Candidate_Vote) AS REAL) AS SumCapECNE, CAST(SUM(Capped_EC_Standard) AS REAL) as SumCapECStd, 
CAST(SUM(UnCapped_EC_Full_Candidate_Vote) AS REAL) as SumUnCapECFull, CAST(SUM(UnCapped_EC_NE_Candidate_Vote) AS REAL) as SumUnCapECNE, 
CAST(SUM(UnCapped_EC_Standard) AS REAL) AS SumUnCapECStd
FROM Total2008
GROUP BY FEC_ID)
SELECT Fix.STATE, Fix.FEC_ID, Fix.Candidate_Name, CAST(Fix.SumCanVote/Sum(Total2008.Candidate_Votes) AS REAL) AS Percent_CV,
 CAST(Fix.SumCapECFull/Sum(Total2008.Capped_EC_Full_Candidate_Vote) AS REAL) as Percent_CapECFull, 
 CAST(Fix.SumCapECNE/Sum(Total2008.Capped_EC_NE_Candidate_Vote) AS REAL) AS Percent_CapECNE,
 CAST(Fix.SumCapECStd/Sum(Total2008.Capped_EC_Standard) AS REAL) AS Percent_CapECWTA,
 CAST(Fix.SumUnCapECFull/Sum(Total2008.UnCapped_EC_Full_Candidate_Vote) AS REAL) as Percent_UnCapECFull,
 CAST(Fix.SumUnCapECNE/Sum(Total2008.UnCapped_EC_NE_Candidate_Vote) AS REAL) AS Percent_UnCapECNE,
 CAST(Fix.SumUnCapECStd/Sum(Total2008.UnCapped_EC_Standard) AS REAL) AS Percent_UnCapECWTA
 FROM Fix
 JOIN Total2008
 ON Fix.STATE = Total2008.STATE</sql><sql name="SQL 1 (1)">WITH HELP AS (
SELECT STATE, Num_Reps_Capped - SUM(CapEC_NE_CanVotes)as &quot;CapEC_NE_CanRemVote&quot;, 
(Num_Reps_Capped + 2) - SUM(CapEC_Full_CanVotes) as &quot;CapEC_Full_CanRemVote&quot;,
Num_Reps_Uncapped - SUM(UnCapEC_NE_CanVotes) as &quot;UnCapEC_NE_CanRemVote&quot;, 
(Num_Reps_Uncapped + 2) - SUM(UnCapEC_Full_CanVotes) as &quot;UnCapEC_Full_CanRemVote&quot;
FROM LG_Elect2008
GROUP BY STATE)
SELECT Remainder2008.*, HELP.*,
CASE 
WHEN Remainder2008.CapEC_NE_CanRemVote = HELP.CapEC_NE_CanRemVote AND Remainder2008.CapEC_Full_CanRemVote = HELP.CapEC_FULL_CanRemVote AND 
Remainder2008.UnCapEC_NE_CanRemVote = HELP.UnCapEC_NE_CanRemVote AND Remainder2008.UnCapEC_FULL_CanRemVote = HELP.UnCapEC_FULL_CanRemVote
THEN &quot;TRUE&quot;
ELSE &quot;FALSE&quot;
END AS HOPE
FROM Remainder2008
INNER JOIN HELP
ON Remainder2008.STATE = HELP.STATE
</sql><sql name="SQL 1 (2)">WITH Practice AS (
SELECT
STATE,
Candidate_Name,
UnCapEC_NE_CanRemainder,
CAST(ROW_NUMBER() OVER (PARTITION BY STATE ORDER BY UnCapEC_NE_CanRemainder DESC, Candidate_Votes DESC) AS REAL) AS UnCapEC_NE_CanRemain_Rank,
UnCapEC_NE_CanRemVote
FROM LG_Remain2016
)
SELECT *,
CASE
WHEN Practice.UnCapEC_NE_CanRemain_Rank &lt;= Practice.UnCapEC_NE_CanRemVote
THEN 1
ELSE 0
END AS Adding_UnCapEC_NE_Remainder
FROM Practice</sql><current_tab id="2"/></tab_sql></sqlb_project>
